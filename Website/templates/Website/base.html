{% load article_filters %}
{% load django_bootstrap5 %}
{% load i18n %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>{% block title %}Website{% endblock %}</title>
	{% bootstrap_css %}
	<!-- Bootstrap Icons CDN -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>
<body>

	<!-- Top small language link (top-right) -->
	<div class="container-fluid py-2">
		<div class="d-flex justify-content-end gap-2">
			{% get_available_languages as languages %}
			{% get_current_language as current_lang %}
			{% for code, name in languages %}
				{% if code == current_lang %}
					<span class="text-muted small"><strong>{{ name }}</strong></span>
				{% else %}
					{% language code %}
						<a href="{% url 'Website:home' %}" class="text-decoration-none small">{{ name }}</a>
					{% endlanguage %}
				{% endif %}
			{% endfor %}
		</div>
	</div>

	<!-- Big Title and subtitle -->
	<div class="container site-title">
		<div class="row">
			<div class="col-12">
				<h1 class="display-5">{% trans "Articles" %} <small class="text-muted">{% trans "Share your writings" %}</small></h1>
			</div>
		</div>
	</div>

	<!-- Dark menu bar with left links and right login/status -->
	<div class="container-fluid">
		<div class="bg-dark text-light p-2 nav-box">
			<div class="container">
				<div class="row align-items-center">
					<!-- Left menu area -->
					<div class="col-md-8 d-flex align-items-center">
							<div class="d-inline-flex align-items-center justify-content-center bg-dark text-light rounded me-2 p-2">
								<i class="bi bi-layout-text-window-reverse"></i>
						</div>
						<ul class="nav menu-left">
							<li class="nav-item">
								<a class="nav-link text-light" href="{% url 'Website:home' %}">{% trans "Home" %}</a>
							</li>
							<li class="nav-item">
								<a class="nav-link text-light" href="{% url 'Website:articles' %}">{% trans "Last Articles" %}</a>
							</li>
							{% if user.is_authenticated %}
							<li class="nav-item">
								<a class="nav-link text-light" href="{% url 'Website:favourites' %}">{% trans "Favourites" %}</a>
							</li>
							<li class="nav-item">
								<a class="nav-link text-light" href="{% url 'Website:publications' %}">{% trans "Publications" %}</a>
							</li>
							{% else %}
							<li class="nav-item">
								<a class="nav-link text-light" href="{% url 'Website:register' %}">{% trans "Register" %}</a>
							</li>
							{% endif %}
						</ul>
					</div>

					<!-- Right login/status area -->
					<div class="col-md-4 d-flex justify-content-end align-items-center">
						{% if not user.is_authenticated %}
								<form method="post" action="{% url 'Website:login' %}" class="d-flex align-items-center gap-2">
									{% csrf_token %}
									<input type="text" class="form-control form-control-sm w-25" name="username" placeholder="{% trans 'username' %}">
									<input type="password" class="form-control form-control-sm w-25" name="password" placeholder="{% trans 'password' %}">
									<button class="btn btn-sm btn-light" type="submit">{% trans "Login" %}</button>
								</form>
						{% else %}
							<div class="text-end">
								<span class="small">{% trans "Logged as" %} <strong>{{ user.username }}</strong></span>
								<form method="post" action="{% url 'Website:logout' %}" class="d-inline ms-2">
									{% csrf_token %}
									<button class="btn btn-sm btn-outline-light" type="submit">{% trans "Logout" %}</button>
								</form>
							</div>
						{% endif %}
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Main Content -->
	<div class="container-fluid mt-4">
		{% block content %}{% endblock %}
	</div>

	{% bootstrap_javascript %}
</body>
</html>
